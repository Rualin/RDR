@startuml
'https://plantuml.com/component-diagram

!theme mono

!define C_WIP brown
!define C_FUT slategray
!define C_OPT darkgrey

skinparam {
  linetype ortho
}

<style>
' in progress
.i{
  lineColor C_WIP
  fontColor C_WIP
}
' future releases
.f{
  lineColor C_FUT
  fontColor C_FUT
}
</style>

hide stereotype

title

  Doctor Documents Recognizer Architecture

end title


folder inp [
  inp
  --
  Input Images
  |_ pdf
  |_ jpg
]

folder out [
  out
  --
  |_ json
]

package "prd\n----\nProduction Deliverables" as prd {

  component nrm <<f>> [
    nrm
    --
    Normalizer
    --
    Converts supported 
    input formats
    to JPEG
  ]
  
  component pre [
    pre
    --
    Preprocessor
  ]
  
  component ocr [
    ocr
  ]
  
  package nlp {
  
    component spt [
      spt
      --
      Splitter
    ]
    
    component llm
    
    file pmt [
      pmt
      --
      Prompt Set
    ]
  
  }
  
  component vld <<f>> [
    vld
    --
    Validator
  ]
  
  file shm [
    shm
    --
    JSON Schema
  ]
  
  storage stg [
    stg
    --
    File Storage
    |_ jpg
    |_ ocr-out  txt (non-structured)
  ]
  
  component ppl [
    ppl
    --
    Pipeline
  ]
  
  ppl -- pre : 2
  ppl -- nrm : 4
  ppl -- ocr : 6
  ppl -- nlp : 8
  ppl -r- vld <<f>> : 10
  
  stg -- ppl : 3, 5, 7, 9
  
  vld -u- shm <<f>>

}

package "dev\n----\nDev Dependencies" as dev {

  package bmk_ocr [
    bmk_ocr
    --
    Benchmark OCR
    |_ test set
      |_ cases:
        |_ inp
        |_ expected
    |_ runner
    |_ metric set
    |_ dashboard
  ]
  
  package bmk_nlp [
    bmk_nlp
    --
    Benchmark NLP
    |_ test set
      |_ cases:
        |_ inp
        |_ expected
    |_ runner
    |_ metric set
    |_ dashboard
  ]
  

}

ppl -l-> inp : 1
ppl -r-> out : 9


@enduml
